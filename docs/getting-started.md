<!-- Generated by Graft | model=bedrock-claude-v4.5-sonnet-us | sig=1482b0426f54d8e791174f286f7dc7e04c33d3b0450d26618433c4895a044029 | rev=16b2c01 | 2025-11-04 -->
# Getting Started with Graft

Graft is an LLM-powered documentation pipeline that keeps your documents consistent and up-to-date as your source materials evolve.

## Prerequisites

Before you begin, ensure you have:

- **Docker** installed and running on your machine
- **AWS credentials** with access to Amazon Bedrock
- **Claude Sonnet 4.5** enabled in your AWS Bedrock account (model: `anthropic.claude-3-5-sonnet-20241022-v2:0`)

To verify your AWS access, run `aws bedrock list-foundation-models --region us-east-1` and confirm Claude models are listed.

## Installation

### Build Graft

First, clone the Graft repository and build the Docker image:

```bash
git clone https://github.com/yourusername/graft.git
cd graft
make build
```

This creates a `graft:local` Docker image with all dependencies bundled.

### Set Up Your Project

Create a new directory for your documentation project:

```bash
mkdir my-docs
cd my-docs
```

You'll need to configure AWS credentials. Graft supports two methods:

**Option 1: Mounted credentials (recommended)**

If you have AWS SSO or profiles configured on your host machine, Graft automatically mounts your `~/.aws` directory. Simply ensure you're logged in:

```bash
aws sso login --profile your-profile
```

**Option 2: Environment variables**

Copy the example environment file and configure explicit credentials:

```bash
cp /path/to/graft/.env.example .env
```

Edit `.env` and set your credentials:

```
AWS_REGION=us-east-1
AWS_DEFAULT_REGION=us-east-1
# Optionally uncomment and set explicit credentials:
# AWS_ACCESS_KEY_ID=your-key
# AWS_SECRET_ACCESS_KEY=your-secret
```

### Initialize Graft

Initialize the DVC pipeline in your project:

```bash
/path/to/graft/bin/graft init
```

This creates a `.dvc` directory and initializes version control for your documentation pipeline. You'll see confirmation that DVC has been initialized.

## Create Your First Document

Let's create a simple product overview document to see Graft in action.

### Scaffold a New Prompt

Create a new document prompt:

```bash
/path/to/graft/bin/graft new product-overview general
```

This creates `docs/general/product-overview.prompt.md` with a basic template.

### Add Dependencies and Instructions

First, create a source document that your product overview will depend on:

```bash
mkdir -p docs/general
cat > docs/general/features.md <<EOF
# Core Features

- **Automatic Updates**: Documents regenerate when dependencies change
- **Smart Diffing**: Only changed content is sent to the LLM
- **Version Control**: Full DVC integration for reproducibility
- **AWS Bedrock**: Powered by Claude Sonnet 4.5
EOF
```

Now edit `docs/general/product-overview.prompt.md` to define the document generation logic:

```markdown
---
deps:
  - docs/general/features.md
---
# Product Overview — Prompt

You are writing a product overview document for Graft, an LLM-powered documentation pipeline.

Based on the features listed in the dependencies, create a concise product overview that:
- Starts with a one-sentence value proposition
- Summarizes the key features in accessible language
- Explains who would benefit from using this tool
- Keeps the tone professional but approachable

Keep the overview to 2-3 paragraphs maximum.
```

### Generate the Document

Run the pipeline to generate your document:

```bash
/path/to/graft/bin/graft rebuild
```

You'll see:
1. DVC generates a pipeline configuration from your prompt files
2. The pipeline identifies stages to run
3. Claude Sonnet processes your prompt and dependencies
4. The output is written to `docs/general/product-overview.md`

The entire process typically takes 10-30 seconds depending on document complexity.

## Review and Iterate

View your generated document:

```bash
cat docs/general/product-overview.md
```

You'll see a polished product overview based on your feature list and prompt instructions.

Graft automatically detects what changed and takes the appropriate action:

**Editing source files (UPDATE)**

If you modify `docs/general/features.md`, Graft sends only the semantic diff to Claude along with the previous output. The LLM updates just the affected sections, preserving unchanged content:

```bash
echo "- **Docker-based**: No local dependencies to install" >> docs/general/features.md
/path/to/graft/bin/graft rebuild
```

Claude receives the diff showing the new feature and updates the document accordingly.

**Editing prompt instructions (REFINE)**

If you modify the instructions in `product-overview.prompt.md`, Graft regenerates the document using the updated guidance while keeping source dependencies the same:

```bash
# Edit product-overview.prompt.md to change the tone or structure
/path/to/graft/bin/graft rebuild
```

Claude applies your new instructions to the same source content.

You don't need to specify what changed—Graft analyzes dependencies and determines the optimal update strategy automatically.

## Next Steps

You've created your first Graft-powered document! Here's where to go from here:

- **[Use Cases](use-cases.md)**: See practical examples of documentation workflows Graft excels at—from executive summaries to technical specifications
- **[How It Works](how-it-works.md)**: Understand Graft's architecture, the diff-based update system, and how it minimizes token usage
- **[Configuration](configuration.md)**: Learn about model selection, custom parameters, and advanced dependency management
- **[Command Reference](command-reference.md)**: Complete guide to all `bin/graft` commands including `diff`, `uses`, and `status`

For complex documentation projects with multiple interdependent documents, review the dependency graph features and multi-stage pipeline capabilities in the configuration guide.
