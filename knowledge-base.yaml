apiVersion: kb/v1
name: graft
description: "Implementation knowledge base for Graft - development guides, code structure, and implementation documentation"

entrypoints:
  human: docs/README.md
  agent: AGENTS.md

meta:
  entrypoint: "../meta-knowledge-base/docs/meta.md"

imports:
  - kind: local
    path: ../meta-knowledge-base
    entrypoint: meta.yaml
  - kind: local
    path: ../graft-knowledge
    entrypoint: knowledge-base.yaml
  - kind: local
    path: ../python-starter
    entrypoint: knowledge-base.yaml

paths:
  docs: docs
  notes: notes

sources:
  canonical:
    - path: "../graft-knowledge/docs/architecture.md"
      note: "Architecture decisions come from graft-knowledge (specs)"
    - path: "../graft-knowledge/docs/decisions/**"
      note: "ADRs are maintained in graft-knowledge"
    - path: "../graft-knowledge/docs/specification/**"
      note: "All format and operation specifications are canonical"
    - path: "src/graft/**/*.py"
      note: "Source code is canonical for implementation details"
    - path: "docs/decisions/**"
      note: "Implementation-specific ADRs (error handling, etc.)"

  interpretation:
    - path: "docs/README.md"
      note: "Developer-friendly architecture overview, interprets graft-knowledge specs"
    - path: "docs/guides/**"
      note: "User guides - practical application of canonical specifications"
    - path: "docs/configuration.md"
      note: "Configuration examples and guidance, interprets format specs"

  tracking:
    - path: "status/**"
      note: "Implementation tracking - working documents, not canonical"
    - path: "notes/**"
      note: "Time-bounded exploration and session logs"

rules:
  lifecycle:
    statuses: ["draft", "working", "stable", "deprecated"]
  provenance:
    requiredFor: ["factual-claims", "operational-guidance"]
  writes:
    allow: ["docs/**", "notes/**"]
    deny: ["secrets/**", "config/prod/**"]
