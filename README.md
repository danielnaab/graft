# Docflow

LLM-powered documentation pipeline that generates Markdown documents from Markdown prompts using DVC, AWS Bedrock, and Claude Sonnet 4.5.

## Overview

Docflow treats documentation as code, using git-based change detection and DVC pipeline management to keep docs synchronized with sources. The system intelligently detects what changed and applies the right update strategy—whether that's generating from scratch, applying semantic updates, or restyling entirely.

Key capabilities:

- **Intelligent change detection** - Tracks both source file changes and prompt instruction changes
- **DVC pipeline** - Reproducible, version-controlled documentation workflows
- **Multi-level DAGs** - Generated docs can be inputs to other prompts
- **Auto-generated dvc.yaml** - Never edit manually, generated from prompt frontmatter
- **Docker-based execution** - No local Python dependencies needed
- **Claude Sonnet 4.5** - High-quality document generation via AWS Bedrock

## Quick Start

### Prerequisites

- Docker
- AWS credentials with Bedrock access

### Build docflow

```bash
git clone <docflow-repo>
cd docflow
make build
```

### Use in your project

```bash
cd ../your-project

# Configure AWS credentials
cp .env.example .env
# Edit .env with your AWS credentials

# Initialize docflow
bin/docflow init

# Create your first document
bin/docflow new executive-summary strategy
# Edit docs/strategy/executive-summary.prompt.md

# Generate documentation
bin/docflow rebuild
```

## Documentation

Start with the [Project Overview](docs/project-overview.md) for a comprehensive introduction.

Reference documentation:

- [Getting Started](docs/getting-started.md) - Installation, setup, and first steps
- [How It Works](docs/how-it-works.md) - Architecture, change detection, and DAGs
- [Configuration](docs/configuration.md) - Environment variables and frontmatter options
- [Command Reference](docs/command-reference.md) - All CLI commands with examples
- [Troubleshooting](docs/troubleshooting.md) - Common issues and solutions

## Core Commands

```bash
bin/docflow init                      # Initialize project (DVC + hooks)
bin/docflow rebuild                   # Generate dvc.yaml and run pipeline
bin/docflow status                    # Show pipeline status
bin/docflow new <name> [topic]        # Scaffold a new document
bin/docflow uses <file>               # Show which prompts depend on a file
bin/docflow diff <stage>              # Inspect prompt context
```

## How It Works

1. **Write sources** - Create manual `.md` files with your content
2. **Define prompts** - Create `.prompt.md` files with frontmatter specifying dependencies
3. **Generate** - Run `bin/docflow rebuild` to create output documents
4. **Iterate** - Edit sources or prompts, rebuild to apply changes

The system automatically detects what changed (sources vs prompts) and applies the appropriate action:

- **GENERATE** - Create new document from scratch
- **UPDATE** - Apply only semantic changes from source diffs
- **RESTYLE** - Rewrite entire document with new prompt style
- **REFRESH** - Apply both source updates and new style
- **MAINTAIN** - Keep document unchanged

## Multi-Level Documentation

Generated documents can be inputs to other prompts, creating documentation hierarchies:

```
sources/strategy.md (manual)
  └─> explorations/analysis.md (generated)
      └─> frameworks/technical.md (generated)
          └─> artifacts/brief.md (generated)
```

DVC efficiently manages this with git-tracked outputs and automatic change propagation.

## Claude Skills

Docflow includes the **steward** skill for AI-assisted documentation management. To use it in your project:

```bash
cd your-project/.claude/skills
ln -s ../../../docflow/.claude/skills/steward steward
```

The steward skill enables goal-oriented documentation workflows where you describe what you need and the assistant handles analysis, planning, validation, execution, and review.

## Example

The [Project Overview](docs/project-overview.md) in this repository is itself generated by docflow from multiple source documents, demonstrating the tool's capability to synthesize information while maintaining clarity and structure.

## License

[TBD]
